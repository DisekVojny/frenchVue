import{r as n,j as e,L as p}from"./index-T5eQUsum.js";import{s,F as w,a as v,b as g}from"./index-InxAgBJW.js";function b(){const[r,x]=n.useState(!1),[f,t]=n.useState(""),i=n.useRef(null),l=n.useRef(null);async function c(){var d,u,m,h;if(/^[^\s]{4,20}$/.test(((d=i.current)==null?void 0:d.value)||"")){if(!/^[^\s]{7,20}$/.test(((u=l.current)==null?void 0:u.value)||"")){t("Password must have between 7 and 20 characters, spaces are forbidden");return}}else{t("Username must have between 4 and 20 characters");return}t("");const o=(m=i.current)==null?void 0:m.value,j=(h=l.current)==null?void 0:h.value;try{let a=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:j})});if(a.status==200){window.location.replace("/");return}t(await a.text())}catch(a){console.log(a)}}return window.addEventListener("keydown",o=>{o.key==="Enter"&&c()}),e.jsxs("div",{className:`main ${s.login} ${s.form}`,children:[e.jsx("div",{className:`${s.title}`,children:"Log in"}),e.jsxs("div",{className:s.line,children:[e.jsx(w,{}),e.jsx("input",{type:"text",placeholder:"Username",ref:i})]}),e.jsxs("div",{className:s.line,children:[e.jsx("div",{className:s.icon,onClick:()=>x(!r),children:r?e.jsx(v,{}):e.jsx(g,{})}),e.jsx("input",{type:r?"text":"password",placeholder:"Password",ref:l})]}),e.jsx("div",{className:`${s.line} ${s.warning}`,children:f}),e.jsxs("div",{className:s.buttons,children:[e.jsx(p,{to:"/register",children:"Nie masz konta? Stwórz nowe tutaj!"}),e.jsx("div",{className:s.button,onClick:c,children:"Zaloguj się"})]})]})}export{b as default};
