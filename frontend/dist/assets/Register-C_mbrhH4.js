import{r as a,j as e,L as k}from"./index-T5eQUsum.js";import{s,F as z,a as v,b as w}from"./index-InxAgBJW.js";function E(){const[r,g]=a.useState(!1),[l,y]=a.useState(!1),[N,t]=a.useState(""),o=a.useRef(null),n=a.useRef(null),d=a.useRef(null);async function u(){var m,j,p,x,f,h;if(/^[^\s]{4,20}$/.test(((m=o.current)==null?void 0:m.value)||""))if(/^[^\s]{7,20}$/.test(((j=n.current)==null?void 0:j.value)||"")){if((((p=n.current)==null?void 0:p.value)||"")!==(((x=d.current)==null?void 0:x.value)||"")){t("Hasła nie są identyczne");return}}else{t("Hasło musi mieć od 7 do 20 znaków, nie może zawierać spacji");return}else{t("Login musi mieć od 4 do 20 znaków, nie może zawierać spacji");return}t("");const c=(f=o.current)==null?void 0:f.value,R=(h=n.current)==null?void 0:h.value;try{let i=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:R})});if(i.status==200){window.location.replace("/");return}t(await i.text())}catch(i){console.log(i)}}return window.addEventListener("keydown",c=>{c.key==="Enter"&&u()}),e.jsxs("div",{className:`main ${s.login} ${s.form}`,children:[e.jsx("div",{className:`${s.title}`,children:"Register"}),e.jsxs("div",{className:s.line,children:[e.jsx(z,{}),e.jsx("input",{type:"text",placeholder:"Username",ref:o})]}),e.jsxs("div",{className:s.line,children:[e.jsx("div",{className:s.icon,onClick:()=>g(!r),children:r?e.jsx(v,{}):e.jsx(w,{})}),e.jsx("input",{type:r?"text":"password",placeholder:"Password",ref:n})]}),e.jsxs("div",{className:s.line,children:[e.jsx("div",{className:s.icon,onClick:()=>y(!l),children:l?e.jsx(v,{}):e.jsx(w,{})}),e.jsx("input",{type:l?"text":"password",placeholder:"Repeat password",ref:d})]}),e.jsx("div",{className:`${s.line} ${s.warning}`,children:N}),e.jsxs("div",{className:s.buttons,children:[e.jsx(k,{to:"/login",children:"Masz juz konto? zaloguj sie tutaj"}),e.jsx("div",{className:s.button,onClick:u,children:"Zaloguj się"})]})]})}export{E as default};
