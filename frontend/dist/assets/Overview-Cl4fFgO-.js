import{u as j,r as m,j as e}from"./index-T5eQUsum.js";const x="_mainInfo_11kmb_1",v="_every_11kmb_7",N="_selected_11kmb_18",s={mainInfo:x,every:v,selected:N,delete:"_delete_11kmb_25"};function o(t){return[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),String(t.getFullYear()).slice(-2)].join("/")}function y(){const t=j();console.log(t.id);const[l,i]=m.useState(null);if(m.useEffect(()=>{fetch(`/details/${t.id}`).then(n=>n.json()).then(n=>{i(n)})},[t.id]),l){if(l[0]==="yo")return e.jsx(g,{...l});if(l[0]==="mes")return e.jsx(f,{...l})}else return e.jsx("h1",{children:"Loading..."});return e.jsx("h1",{children:"Could not get information about this habit"})}function g({1:t,2:l}){const i=l.map(c=>new Date(c.start));i.sort((c,r)=>c.getTime()-r.getTime());let n="";i.length&&(n=o(i[0]));async function a(){if((await fetch("/delete/yo",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})})).ok){setTimeout(()=>{window.location.replace("/")},100);return}}return e.jsx("div",{className:s.yo,children:e.jsxs("div",{className:s.mainInfo,children:[e.jsxs("div",{className:s.name,children:["Name: ",t.name]}),e.jsx("div",{className:s.type,children:"Type: Yes/No"}),e.jsxs("div",{className:s.notes,children:["Notes: ",t.notes]}),e.jsxs("div",{className:s.every,children:[e.jsx("div",{className:t.days[0]==="1"?s.selected:"",children:"M"}),e.jsx("div",{className:t.days[1]==="1"?s.selected:"",children:"T"}),e.jsx("div",{className:t.days[2]==="1"?s.selected:"",children:"W"}),e.jsx("div",{className:t.days[3]==="1"?s.selected:"",children:"T"}),e.jsx("div",{className:t.days[4]==="1"?s.selected:"",children:"F"}),e.jsx("div",{className:t.days[5]==="1"?s.selected:"",children:"S"}),e.jsx("div",{className:t.days[6]==="1"?s.selected:"",children:"S"})]}),e.jsxs("div",{className:s.started,children:["First time completed this habit on: ",n]}),i.length!==0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.times,children:["At this moment, you completed this habit ",i.length," times!"]})}),e.jsx("h1",{className:s.delete,onClick:a,children:"Delete this habit?"})]})})}function f({1:t,2:l}){const i=l.map(d=>new Date(d.start)),n=l.map(d=>d.target/t.target);let a=0;n.length&&(a=n.reduce((d,h)=>d+h,0)/n.length),i.sort((d,h)=>d.getTime()-h.getTime());let c="It hasn't been done yet";i.length&&(c=o(i[0]));async function r(){if((await fetch("/delete/mes",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})})).ok){setTimeout(()=>{window.location.replace("/")},100);return}}return e.jsx("div",{className:s.mes,children:e.jsxs("div",{className:s.mainInfo,children:[e.jsxs("div",{className:s.name,children:["Name: ",t.name]}),e.jsx("div",{className:s.type,children:"Type: Measurable"}),e.jsxs("div",{className:s.target,children:["Daily target: ",t.target," ",t.unit]}),e.jsxs("div",{className:s.notes,children:["Notes: ",t.notes]}),e.jsxs("div",{className:s.every,children:[e.jsx("div",{className:t.days[0]==="1"?s.selected:"",children:"M"}),e.jsx("div",{className:t.days[1]==="1"?s.selected:"",children:"T"}),e.jsx("div",{className:t.days[2]==="1"?s.selected:"",children:"W"}),e.jsx("div",{className:t.days[3]==="1"?s.selected:"",children:"T"}),e.jsx("div",{className:t.days[4]==="1"?s.selected:"",children:"F"}),e.jsx("div",{className:t.days[5]==="1"?s.selected:"",children:"S"}),e.jsx("div",{className:t.days[6]==="1"?s.selected:"",children:"S"})]}),e.jsxs("div",{className:s.started,children:["First time completed this habit on: ",c]}),i.length!==0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.times,children:["At this moment, you completed this habit ",i.length," times!"]}),e.jsxs("div",{className:s.times,children:["Avearge accomplishment: ",a*100,"%"]})]}),e.jsx("h1",{className:s.delete,onClick:r,children:"Delete this habit?"})]})})}export{y as default};
